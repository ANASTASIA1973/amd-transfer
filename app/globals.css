@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===================================================== */
/* Root defaults (Fallback außerhalb des AMD-Scopes)      */
/* ===================================================== */
:root {
  --background: #ffffff;
  --foreground: #171717;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: Arial, Helvetica, sans-serif;
}

/* ===================================================== */
/* Global Fixes                                           */
/* ===================================================== */

/* iOS / Safari: Tap-Highlight aus + weniger Render-Flackern (nur Transfer-App) */
body[data-app="amd-transfer"] * {
  -webkit-tap-highlight-color: transparent;
}

@supports (-webkit-touch-callout: none) {
  body[data-app="amd-transfer"] .ios-fix {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
}

/* Google-Autocomplete immer über dem Layout anzeigen */
.pac-container {
  z-index: 10000 !important;
}

/* Telefonnummern nie umbrechen (z. B. Buttons, Copy-Text) */
a[href^="tel:"],
.no-break-phone {
  white-space: nowrap;
  word-break: keep-all;
}

/* ===================================================== */
/* AMD Transfer Theme (scoped) — nur Optik, keine Logik   */
/* Aktiv über: <body data-app="amd-transfer">             */
/* ===================================================== */
body[data-app="amd-transfer"] {
  /* Brand */
  --amd-red: #c1272d;
  --amd-gold: #c09743;
  --amd-cedar: #176f4b;

  /* Semantik */
  --amd-primary: var(--amd-red);
  --amd-accent: var(--amd-cedar);

  /* UI */
  --amd-bg: #f6f7fa;
  --amd-card-bg: rgba(255, 255, 255, 0.92);
  --amd-border: rgba(17, 24, 39, 0.10);
  --amd-text: #0f172a;
  --amd-muted: rgba(15, 23, 42, 0.70);
  --amd-heading: #0b1b33;

  --amd-shadow-card: 0 18px 50px rgba(2, 6, 23, 0.10);
  --amd-shadow-soft: 0 10px 25px rgba(2, 6, 23, 0.08);

  background: var(--amd-bg);
  color: var(--amd-text);
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial,
    "Noto Sans", "Helvetica Neue", sans-serif;
}

@layer base {
  body[data-app="amd-transfer"] h1,
  body[data-app="amd-transfer"] h2,
  body[data-app="amd-transfer"] h3 {
    color: var(--amd-heading);
    letter-spacing: -0.02em;
  }

  body[data-app="amd-transfer"] p,
  body[data-app="amd-transfer"] span,
  body[data-app="amd-transfer"] label {
    color: var(--amd-text);
  }

  /* Bulletpoints in Zedern-Grün */
  body[data-app="amd-transfer"] ul li::marker {
    color: var(--amd-cedar);
  }
}

/* ===================================================== */
/* Components                                             */
/* ===================================================== */
@layer components {
  /* Buttons */
  .btn {
    @apply py-3 px-6 rounded-lg font-medium transition;
  }

  .btn-primary {
    @apply text-white shadow-lg;
    @apply bg-[color:var(--amd-primary,#c1272d)];
    @apply hover:bg-[color:var(--amd-gold,#c09743)];
    @apply focus:outline-none focus:ring-2 focus:ring-[color:var(--amd-accent,#176f4b)];
  }

  .btn-secondary {
    @apply bg-white border border-gray-200 shadow-sm;
    @apply hover:border-[color:var(--amd-accent,#176f4b)] hover:bg-[#FAFAF9];
    @apply focus:outline-none focus:ring-2 focus:ring-[color:var(--amd-accent,#176f4b)];
    color: var(--amd-heading, #0b1b33);
  }

  .btn-disabled {
    @apply bg-gray-200 text-gray-500 cursor-not-allowed;
  }

  /* Einheitlicher Bild-Container für ExtrasStep */
  .extras-img-wrapper {
    @apply w-24 h-40 overflow-hidden rounded bg-white flex items-center justify-center;
  }

  .extras-img-wrapper img {
    @apply h-full w-auto object-contain;
  }
    /* ===============================
     Step Buttons – Mobile einheitlich
     Mobile: untereinander + volle Breite
     Desktop: nebeneinander
     =============================== */
  .amd-step-actions {
    @apply flex flex-col gap-3 items-stretch;
  }

  .amd-step-actions > * {
    @apply w-full;
  }

}
 @media (min-width: 640px) {
    .amd-step-actions {
      @apply flex-row;
    }
    .amd-step-actions > * {
      width: auto;
    }
  }

/* ===================================================== */
/* Optional: Language Switcher Styling                    */
/* ===================================================== */
body[data-app="amd-transfer"] .lang-switch {
  background: rgba(255, 255, 255, 0.86);
  border: 1px solid var(--amd-border);
  border-radius: 999px;
}

body[data-app="amd-transfer"] .lang-switch button,
body[data-app="amd-transfer"] .lang-switch a {
  background: transparent !important;
  color: var(--amd-heading) !important;
}

body[data-app="amd-transfer"] .lang-switch button[aria-pressed="true"],
body[data-app="amd-transfer"] .lang-switch button[aria-current="true"],
body[data-app="amd-transfer"] .lang-switch .active {
  background: var(--amd-primary) !important;
  color: #fff !important;
  box-shadow: 0 10px 25px rgba(2, 6, 23, 0.10);
}

/* Flag Switcher (Pills) */
@layer components {
  body[data-app="amd-transfer"] .amd-flag-switcher {
    display: inline-flex;
    gap: 0.45rem;
    padding: 0.35rem;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.92);
    border: 1px solid rgba(17, 24, 39, 0.10);
    box-shadow: 0 10px 26px rgba(2, 6, 23, 0.08);
    align-items: center;
  }

  body[data-app="amd-transfer"] .amd-flag-pill {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.55rem 0.9rem;
    border-radius: 999px;
    font-weight: 800;
    font-size: 12px;
    letter-spacing: 0.08em;
    color: var(--amd-primary, #002147);
    background: transparent;
    border: 1px solid transparent;
    line-height: 1;
  }

  body[data-app="amd-transfer"] .amd-flag-pill:hover {
    background: rgba(0, 33, 71, 0.06);
  }

  body[data-app="amd-transfer"] .amd-flag-pill[aria-pressed="true"] {
    background: #fff;
    border-color: rgba(192, 151, 67, 0.55);
    box-shadow: 0 8px 18px rgba(2, 6, 23, 0.10);
  }

  body[data-app="amd-transfer"] .amd-flag-icon {
    width: 22px;
    height: 22px;
    border-radius: 999px;
    object-fit: cover;
    box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.10);
  }
}

/* Transfer-App: Primärbutton bleibt rot – kein Gold Hover */
.btn-primary {
  background-color: var(--amd-primary, #c1272d) !important;
  color: #fff !important;
  border-color: transparent !important;
}

.btn-primary:hover,
.btn-primary:focus,
.btn-primary:focus-visible {
  background-color: #a91f24 !important; /* dunkleres Rot */
  color: #fff !important;
  filter: none !important;
}

.btn-primary:active {
  background-color: #8f1a1f !important;
}

/* ===================================================== */
/* AMD Transfer – Header Mobile Fix                       */
/* ===================================================== */
@media (max-width: 520px) {
  body[data-app="amd-transfer"] .amd-topbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    flex-wrap: wrap;
    padding-left: 12px;
    padding-right: 12px;
  }

  /* Logo darf schrumpfen statt Layout sprengen */
  body[data-app="amd-transfer"] .amd-topbar .amd-logo {
    flex: 1 1 auto;
    min-width: 140px;
    max-width: 55%;
  }

  /* Flag-Switcher soll nicht drücken */
  body[data-app="amd-transfer"] .amd-topbar .amd-flag-switcher,
  body[data-app="amd-transfer"] .amd-topbar .lang-switch {
    flex: 1 1 auto;
    min-width: 0;
    justify-content: center;
  }

  /* Tour-Button: nie über den Rand */
  body[data-app="amd-transfer"] .amd-topbar .amd-tour-btn {
    flex: 0 0 auto;
    max-width: 100%;
    white-space: nowrap;
    margin-left: auto;
  }
}

/* Counter Pills: iPhone Tap darf NICHT “springen” */
body[data-app="amd-transfer"] .counter-pill:focus {
  outline: none;
  box-shadow: inset 0 0 0 1px rgba(17, 24, 39, 0.14);
}

/* Ring nur bei Tastatur (Tab) */
body[data-app="amd-transfer"] .counter-pill:focus-visible {
  box-shadow:
    inset 0 0 0 1px rgba(31, 111, 58, 0.22),
    0 0 0 4px rgba(31, 111, 58, 0.10);
}

/* iOS Safari: korrektes Clipping in Cards (verhindert „Plus läuft raus“) */
body[data-app="amd-transfer"] .amd-card-clip {
  position: relative;
  overflow: hidden;

  /* Safari-Fix */
  -webkit-mask-image: -webkit-radial-gradient(white, black);
  transform: translateZ(0);
}

/* CTA-Positionierung (nur Mobile) + Platz unten für CTA */
@media (max-width: 640px) {
  body[data-app="amd-transfer"] .amd-whatsapp-cta {
    position: fixed;
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: calc(100% - 28px) !important; /* 14px links/rechts */
    max-width: 640px !important;
    bottom: 14px !important;
    margin: 0 !important;
    z-index: 60 !important;
    box-sizing: border-box !important;
    justify-content: center;
  }

  body[data-app="amd-transfer"] main {
    padding-bottom: 110px !important; /* Platz für fixed CTA */
  }
}

/* ===================================================== */
/* AMD Transfer – Footer (App + Legal)                    */
/* EINMAL sauber definiert (keine doppelten Blöcke)       */
/* ===================================================== */

body[data-app="amd-transfer"] .amd-footer,
.amd-footer {
  background: #0b1220;
  color: rgba(255, 255, 255, 0.92);
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  margin-top: 2.25rem;
  padding: 1.8rem 1rem;
}

/* Grid Desktop */
body[data-app="amd-transfer"] .footer-grid,
.footer-grid {
  max-width: 1100px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 1.6rem;
  align-items: start;
}

/* Tablet runter: einspaltig (Legal-Seiten ok) */
@media (max-width: 768px) {
  body[data-app="amd-transfer"] .footer-grid,
  .footer-grid {
    grid-template-columns: 1fr;
    text-align: center;
  }
}

/* Typo */
body[data-app="amd-transfer"] .footer-title,
.footer-title {
  font-weight: 700;
  margin: 0 0 0.6rem 0;
  color: rgba(255, 255, 255, 0.92);
  font-size: 14px;
}

body[data-app="amd-transfer"] .footer-links,
.footer-links {
  list-style: none;
  padding: 0;
  margin: 0;
}

body[data-app="amd-transfer"] .footer-links li,
.footer-links li {
  margin-bottom: 0.45rem;
}

body[data-app="amd-transfer"] .footer-links a,
.footer-links a {
  color: rgba(255, 255, 255, 0.84);
  text-decoration: none;
  font-weight: 500;
  font-size: 13px;
  line-height: 1.25;
}

body[data-app="amd-transfer"] .footer-links a:hover,
.footer-links a:hover {
  color: var(--amd-gold, #c09743);
}

/* Social */
body[data-app="amd-transfer"] .footer-social,
.footer-social {
  display: flex;
  gap: 0.6rem;
  justify-content: center;
}

body[data-app="amd-transfer"] .footer-social img,
.footer-social img {
  width: 22px;
  height: 22px;
  opacity: 0.95;
}

body[data-app="amd-transfer"] .footer-social img:hover,
.footer-social img:hover {
  opacity: 1;
}

/* Spalten-Alignment Desktop */
.footer-column--center {
  text-align: center;
}

.amd-footer[dir="rtl"] .footer-column:not(.footer-column--center) {
  text-align: right;
}
.amd-footer[dir="ltr"] .footer-column:not(.footer-column--center) {
  text-align: left;
}

.amd-footer .footer-grid {
  justify-items: stretch;
}

.amd-footer .footer-column--right {
  justify-self: end;
  text-align: right;
}

.amd-footer .footer-column--left {
  justify-self: start;
  text-align: left;
}

.amd-footer .footer-column--center {
  justify-self: center;
  text-align: center;
}

/* ===================================================== */
/* Footer Mobile: kompakt (App)                            */
/* ===================================================== */
@media (max-width: 640px) {
  body[data-app="amd-transfer"] .amd-footer {
    margin-top: 14px !important;
    padding: 14px 12px 14px !important;
  }

  body[data-app="amd-transfer"] .amd-footer .footer-grid {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    grid-template-areas:
      "left right"
      "center center" !important;
    gap: 10px 14px !important;
    align-items: start !important;
    text-align: left;
  }

  body[data-app="amd-transfer"] .amd-footer .footer-column--left {
    grid-area: left !important;
    text-align: left !important;
  }

  body[data-app="amd-transfer"] .amd-footer .footer-column--right {
    grid-area: right !important;
    text-align: right !important;
  }

  body[data-app="amd-transfer"] .amd-footer .footer-column--center {
    grid-area: center !important;
    text-align: center !important;
    margin-top: 6px !important;
  }

  body[data-app="amd-transfer"] .amd-footer .footer-title {
    font-size: 13px !important;
    margin: 0 0 6px 0 !important;
  }

  body[data-app="amd-transfer"] .amd-footer .footer-links li {
    margin-bottom: 6px !important;
  }

  body[data-app="amd-transfer"] .amd-footer .footer-links a {
    font-size: 13px !important;
    line-height: 1.25 !important;
  }

  body[data-app="amd-transfer"] .amd-footer .footer-social {
    gap: 10px !important;
  }

  body[data-app="amd-transfer"] .amd-footer .footer-social img {
    width: 22px !important;
    height: 22px !important;
  }

  /* RTL nur im Footer (nicht die ganze Seite) */
  body[data-app="amd-transfer"] .amd-footer[dir="rtl"] .footer-column--left {
    text-align: right !important;
  }
  body[data-app="amd-transfer"] .amd-footer[dir="rtl"] .footer-column--right {
    text-align: left !important;
  }
}
/* ===================================================== */
/* ULTIMATE OVERRIDE: Footer auf Mobile wirklich kompakt  */
/* (App + Legal)                                         */
/* ===================================================== */
@media (max-width: 820px){

  /* weniger Außenabstand und weniger Innenpadding */
  body[data-app="amd-transfer"] .amd-footer,
  .amd-footer{
    margin-top: 14px !important;
    padding: 14px 12px 16px !important;
  }

  /* 2 Spalten, Social unten */
  body[data-app="amd-transfer"] .footer-grid,
  .footer-grid{
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    grid-template-areas:
      "left right"
      "center center" !important;
    gap: 10px 14px !important;
    align-items: start !important;
    text-align: left !important;
  }

  body[data-app="amd-transfer"] .footer-column--left,
  .footer-column--left{
    grid-area: left !important;
    justify-self: start !important;
    text-align: left !important;
  }

  body[data-app="amd-transfer"] .footer-column--right,
  .footer-column--right{
    grid-area: right !important;
    justify-self: end !important;
    text-align: right !important;
  }

  body[data-app="amd-transfer"] .footer-column--center,
  .footer-column--center{
    grid-area: center !important;
    justify-self: center !important;
    text-align: center !important;
    margin-top: 6px !important;
  }

  /* Typo kompakter */
  body[data-app="amd-transfer"] .footer-title,
  .footer-title{
    font-size: 13px !important;
    margin: 0 0 6px 0 !important;
    line-height: 1.2 !important;
  }

  body[data-app="amd-transfer"] .footer-links li,
  .footer-links li{
    margin-bottom: 6px !important;
  }

  body[data-app="amd-transfer"] .footer-links a,
  .footer-links a{
    font-size: 13px !important;
    line-height: 1.2 !important;
  }

  /* Social kleiner + weniger Abstand */
  body[data-app="amd-transfer"] .footer-social,
  .footer-social{
    gap: 10px !important;
    margin-top: 2px !important;
  }

  body[data-app="amd-transfer"] .footer-social img,
  .footer-social img{
    width: 22px !important;
    height: 22px !important;
  }

  /* RTL nur im Footer */
  body[data-app="amd-transfer"] .amd-footer[dir="rtl"] .footer-column--left,
  .amd-footer[dir="rtl"] .footer-column--left{
    text-align: right !important;
    justify-self: end !important;
  }

  body[data-app="amd-transfer"] .amd-footer[dir="rtl"] .footer-column--right,
  .amd-footer[dir="rtl"] .footer-column--right{
    text-align: left !important;
    justify-self: start !important;
  }
}
/* ===================================================== */
/* FINAL FIX: Footer + CTA (App)                          */
/* Social nicht hinter fixed CTA verstecken               */
/* ===================================================== */
@media (max-width: 820px){

  /* CTA bleibt fixed wie gehabt */
  body[data-app="amd-transfer"] .amd-whatsapp-cta{
    position: fixed !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: calc(100% - 28px) !important;
    max-width: 640px !important;
    bottom: 14px !important;
    margin: 0 !important;
    z-index: 60 !important;
    box-sizing: border-box !important;
  }

  /* WICHTIG: Scroll-Platz NACH dem Footer, damit Social sichtbar wird */
  body[data-app="amd-transfer"] .amd-footer{
    margin-bottom: 92px !important; /* ca. CTA-Höhe + Abstand */
  }
}
/* ===================================================== */
/* FINAL FIX: Footer Grid kompakt + symmetrisch (Legal+App) */
/* ===================================================== */
@media (max-width: 820px){

  /* Footer kompakter */
  body[data-app="amd-transfer"] .amd-footer,
  .amd-footer{
    margin-top: 14px !important;
    padding: 14px 12px 16px !important;
  }

  /* 2 Spalten + Center unten */
  body[data-app="amd-transfer"] .footer-grid,
  .footer-grid{
    display:grid !important;
    grid-template-columns: 1fr 1fr !important;
    grid-template-areas:
      "left right"
      "center center" !important;
    gap: 10px 14px !important;
    align-items:start !important;
  }

  body[data-app="amd-transfer"] .footer-column--left,
  .footer-column--left{ grid-area:left !important; text-align:left !important; }

  body[data-app="amd-transfer"] .footer-column--right,
  .footer-column--right{ grid-area:right !important; text-align:right !important; }

  body[data-app="amd-transfer"] .footer-column--center,
  .footer-column--center{ grid-area:center !important; text-align:center !important; margin-top: 6px !important; }

  /* Typo/Abstände kompakt */
  body[data-app="amd-transfer"] .footer-title,
  .footer-title{ font-size: 13px !important; margin: 0 0 6px 0 !important; line-height: 1.2 !important; }

  body[data-app="amd-transfer"] .footer-links li,
  .footer-links li{ margin-bottom: 6px !important; }

  body[data-app="amd-transfer"] .footer-links a,
  .footer-links a{ font-size: 13px !important; line-height: 1.2 !important; }

  body[data-app="amd-transfer"] .footer-social img,
  .footer-social img{ width: 22px !important; height: 22px !important; }
}
/* Hide "Tour anfragen" button in topbar */
body[data-app="amd-transfer"] .amd-tour-btn {
  display: none !important;
}
/* Mobile: "Tour anfragen" überall ausblenden (auch wenn er unten fixiert ist) */
@media (max-width: 640px) {
  body[data-app="amd-transfer"] .amd-tour-btn {
    display: none !important;
  }
}
/* Mobile: unteren fixed CTA ("Tour anfragen") ausblenden */
@media (max-width: 640px) {
  body[data-app="amd-transfer"] .amd-whatsapp-cta {
    display: none !important;
  }

  /* weil CTA weg ist: kein extra Platz unten */
  body[data-app="amd-transfer"] main {
    padding-bottom: 0 !important;
  }
}
/* iOS Safari: verhindert Plus-Überlauf */
.counter-pill {
  line-height: 1;
  -webkit-text-size-adjust: 100%;
}
/* =========================================
   MAIN SITE Footer: AR (rtl) Mobile symmetrisch
   ========================================= */
@media (max-width: 820px){

  /* Spalten in RTL spiegeln */
  .amd-footer[dir="rtl"] .footer-grid{
    grid-template-areas:
      "right left"
      "center center" !important;
  }

  /* beide Link-Spalten gleich ausrichten */
  .amd-footer[dir="rtl"] .footer-column--left,
  .amd-footer[dir="rtl"] .footer-column--right{
    text-align: right !important;
    justify-self: stretch !important;
  }

  /* Center bleibt center */
  .amd-footer[dir="rtl"] .footer-column--center{
    text-align: center !important;
    justify-self: center !important;
  }
}
/* =========================================
   MAIN Footer – AR Mobile wirklich symmetrisch
   (überschreibt die RTL-Flip-Regeln weiter oben)
   ========================================= */
@media (max-width: 820px){

  /* beide Spalten gleich behandeln */
  .amd-footer[dir="rtl"] .footer-column--left,
  .amd-footer[dir="rtl"] .footer-column--right{
    text-align: right !important;
    justify-self: stretch !important;
  }

  /* Links/Title erben das sauber (keine Sonder-Ausrichtung) */
  .amd-footer[dir="rtl"] .footer-title,
  .amd-footer[dir="rtl"] .footer-links,
  .amd-footer[dir="rtl"] .footer-links li,
  .amd-footer[dir="rtl"] .footer-links a{
    text-align: inherit !important;
  }

  /* LTR-Wörter (z.B. “AMD Tarifcheck”) bleiben sauber, aber rechts ausgerichtet */
  .amd-footer[dir="rtl"] .footer-links a{
    unicode-bidi: isolate;
  }
}
/* =========================================
   MAIN SITE Footer – AR Mobile wirklich symmetrisch
   Gilt NUR für React Footer (AmdFooter.jsx)
   ========================================= */
@media (max-width: 820px){

  /* Grid spiegeln */
  .amd-footer[dir="rtl"] .footer-grid{
    grid-template-areas:
      "right left"
      "center center";
  }

  /* Beide Link-Spalten identisch behandeln */
  .amd-footer[dir="rtl"] .footer-column--left,
  .amd-footer[dir="rtl"] .footer-column--right{
    justify-self: stretch;
    text-align: right;
  }

  /* Center bleibt Center */
  .amd-footer[dir="rtl"] .footer-column--center{
    justify-self: center;
    text-align: center;
  }

  /* LTR-Wörter sauber halten (AMD, URLs etc.) */
  .amd-footer[dir="rtl"] .footer-links a{
    unicode-bidi: isolate;
  }
}
